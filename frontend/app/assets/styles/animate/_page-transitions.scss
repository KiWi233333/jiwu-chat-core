@use "@/assets/styles/variables.scss" as *;

// 硬件加速的动画基类（用于页面动画）
.hardware-accelerated-transition {
  transform: translateZ(0);
  will-change: transform, opacity;
  backface-visibility: hidden;
  perspective: 1000px;
}

// 页面动画
$ios-transition-timing-function: cubic-bezier(0.25, 0.75, 0.1, 1); // 更缓启动的仿 iOS 动画曲线
$page-transition-duration: 0.5s;

// Push 动画 (进入下一级)
// 新页面从右侧进入覆盖，旧页面稍向左移动并变暗
.page-slide-left-enter-active {
  position: absolute !important;
  top: 0;
  width: 100%;
  height: 100%; // 确保高度充满
  z-index: 10; // 确保在上面
  transition: transform $page-transition-duration $ios-transition-timing-function;
}

.page-slide-left-leave-active {
  position: absolute !important;
  top: 0;
  width: 100%;
  height: 100%; // 确保高度充满
  z-index: 1; // 确保在下面
  transition:
    transform $page-transition-duration $ios-transition-timing-function,
    opacity $page-transition-duration ease;
}

.page-slide-left-enter-from {
  transform: translateX(100%);
}

.page-slide-left-leave-to {
  transform: translateX(-30%); // 视差效果：只移动 30%
  opacity: 0.8; // 稍微变暗
}

// Pop 动画 (返回上一级)
// 旧页面向右侧滑出，新页面从左侧稍偏移处恢复
.page-slide-right-enter-active {
  position: absolute !important;
  top: 0;
  width: 100%;
  height: 100%; // 确保高度充满
  z-index: 1; // 确保在下面
  transition:
    transform $page-transition-duration $ios-transition-timing-function,
    opacity $page-transition-duration ease;
}

.page-slide-right-leave-active {
  position: absolute !important;
  top: 0;
  width: 100%;
  height: 100%; // 确保高度充满
  z-index: 10; // 确保在上面
  transition:
    transform $page-transition-duration $ios-transition-timing-function,
    opacity $page-transition-duration ease;
}

.page-slide-right-enter-from {
  transform: translateX(-30%); // 从视差位置恢复
  opacity: 0.8;
}

.page-slide-right-leave-to {
  transform: translateX(100%);
}

// 其他渐变
.page-fade-in-move,
.page-fade-in-enter-active,
.page-fade-in-leave-active {
  transition: opacity 0s ease-in-out;
}
.page-fade-in-enter-from {
  opacity: 0;
}
.page-fade-in-leave-to {
  opacity: 0;
}
.page-fade-in-leave-active {
  position: absolute !important;
  top: 0;
  width: 100%;
  height: 100%;
}

// 无动画 (避免 transition 切换导致的重渲染)
.page-none-enter-active,
.page-none-leave-active {
  transition: none !important;
  opacity: 1 !important;
}
.page-none-enter-from,
.page-none-leave-to {
  opacity: 1 !important;
}

.page-fade-enter-active {
  animation: 0.2s fade-in-out;
}
.page-fade-leave-active {
  animation: 0.2s fade-in-out reverse;
}
@keyframes fade-in-out {
  0% {
    position: absolute;
    transition: $transition-delay;
    opacity: 0;
    filter: blur(4px);
  }
  100% {
    position: absolute;
    transition: $transition-delay;
    filter: blur(0px);
    opacity: 1;
  }
}

.animate__blurIn {
  animation: $transition-delay fade-in-out;
}
.animate__fadeIn {
  animation: $transition-delay fade-in-out;
}

@keyframes blur-in {
  0% {
    transition: $transition-delay;
    opacity: 0;
    filter: blur(2px);
  }
  100% {
    transition: $transition-delay;
    filter: blur(0px);
    opacity: 1;
  }
}
